<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Side Navigation Bar</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="theme-color" content="#4e73df">
    <title> EDU Materials</title>
    <link href="images/logo-trans.png" rel="shortcut icon" type="image/x-icon">
    <!-- Custom fonts-->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
</head>

<style>
    @import url('https://fonts.googleapis.com/css?family=Josefin+Sans&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        list-style: none;
        text-decoration: none;
        font-family: 'Josefin Sans', sans-serif;
    }

    body {
        background-color: #f3f5f9;
    }

    .wrapper {
        display: flex;
        position: relative;
    }

    .wrapper .sidebar {
        width: 200px;
        height: 100%;
        background: #4b4276;
        padding: 30px 0px;
        position: fixed;
    }

    .wrapper .sidebar h2 {
        color: #fff;
        text-transform: uppercase;
        text-align: center;
        margin-bottom: 30px;
    }

    .wrapper .sidebar ul li {
        padding: 15px;
        border-bottom: 1px solid #bdb8d7;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .wrapper .sidebar ul li a {
        color: #bdb8d7;
        display: block;
    }

    .wrapper .sidebar ul li a .fas {
        width: 25px;
    }

    .wrapper .sidebar ul li:hover {
        background-color: #594f8d;
    }

    .wrapper .sidebar ul li:hover a {
        color: #fff;
    }

    .wrapper .sidebar .social_media {
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
    }

    h1 {
        text-align: center;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif
    }

    .wrapper .sidebar .social_media a {
        display: block;
        width: 40px;
        background: #594f8d;
        height: 40px;
        line-height: 45px;
        text-align: center;
        margin: 0 5px;
        color: #bdb8d7;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
    }

    .wrapper .main_content {
        width: 100%;
        margin-left: 200px;
    }

    .wrapper .main_content .header {
        padding: 20px;
        background: #fff;
        color: #717171;
        border-bottom: 1px solid #e0e4e8;
    }

    .wrapper .main_content .info {
        margin: 20px;
        color: #717171;
        line-height: 25px;
    }

    .wrapper .main_content .info div {
        margin-bottom: 20px;
    }

    body {
        font-size: 20px;
        font-family: sans-serif;
        color: #333;
    }

    .question {
        font-weight: 600;
    }

    .answers {
        margin-bottom: 20px;
    }

    .answers label {
        display: block;
    }

    #submit {
        font-family: sans-serif;
        font-size: 20px;
        background-color: #279;
        color: #fff;
        border: 0px;
        border-radius: 3px;
        padding: 20px;
        cursor: pointer;
        margin-bottom: 20px;
    }

    #submit:hover {
        background-color: #38a;
    }
</style>

<body>

    <div class="wrapper">
        <div class="sidebar">
            <h2>EDU HUB</h2>
            <ul>
                <li><a href="/userhome"><i class="fas fa-home"></i>Home</a></li>
                <li><a href="/userprofile"><i class="fas fa-user"></i>Profile</a></li>
                <li><a href="/userbooks"><i class="fas fa-book"></i>Ebooks</a></li>
                <li><a href="/useriq"><i class="fas fa-question"></i>Interview Questions</a></li>
                <li><a href="/userregbooks"><i class="fas fa-book"></i>Regulation Books</a></li>
                <li><a href="/usercompilers"><i class="fas fa-desktop"></i>Compilers</a></li>
                <li><a href="/usertimetable"><i class="fas fa-clock"></i>Time Table</a></li>
                <li><a href="/usersoftware"><i class="fas fa-store"></i>SoftWare Tools</a></li>
                <li><a href="/userforums"><i class="fas fa-blog"></i>Forums</a></li>
                <li><a href="/userquiz"><i class="fas fa-quiz"></i>Quiz</a></li>
                <li><a href="/usersuggestions"><i class="fas fa-lightbulb"></i>Suggestions</a></li>
            </ul>

        </div>
        <div class="main_content">
            <div class="header">
                <div class="row">
                    <div class="col md-11">
                        <h1>EDUCATIONAL HUB QUIZ</h1>
                    </div>
                    <hr>
                    <div class="col-md-1">
                        <img src="https://www.pngfind.com/pngs/m/80-804674_png-file-male-user-vector-transparent-png.png"
                            style="height: 100px;width: 100px;border-radius: 100%;">

                    </div>
                </div>
            </div>

            <div class="info">
                <div id="quiz"></div>
                <input id="len" value="<%= docs.length %>" type="hidden" />
                <% for(var i=0; i < docs.length; i++) { %>
                    <input id="para1<%= i %>" value="<%= docs[i].question %>" type="hidden" />
                    <input id="para2<%= i %>" value="<%= docs[i].answers.opt1 %>" type="hidden" />
                    <input id="para3<%= i %>" value="<%= docs[i].answers.opt2 %>" type="hidden" />
                    <input id="para4<%= i %>" value="<%= docs[i].answers.opt3 %>" type="hidden" />
                    <input id="para5<%= i %>" value="<%= docs[i].answers.opt4 %>" type="hidden" />
                    <input id="para6<%= i %>" value="<%= docs[i].correctanswer %>" type="hidden" />

                    <% } %>
                        <% if(docs.length==0) { %>
                            <h1>No Questions Found</h1>
                            <% } %>
                                <% if(docs.length !=0) { %>
                                    <button id="submit">Submit Quiz</button>
                                    <div id="results"></div>
                                    <% } %>

            </div>
        </div>


    </div>
    </div>
    </div>
    <script>
        (function () {
            function buildQuiz() {

                const output = [];

                var length = document.getElementById("len").value;
                for (var i = 0; i < length; i++) {
                    var docs = document.getElementById("para1" + i).value;
                    var docs1 = document.getElementById("para2" + i).value;
                    var docs2 = document.getElementById("para3" + i).value;
                    var docs3 = document.getElementById("para4" + i).value;
                    var docs4 = document.getElementById("para5" + i).value;
                    var docs5 = document.getElementById("para6" + i).value;

                    var questions = {
                        question: docs,
                        answers: {
                            a: docs1,
                            b: docs2,
                            c: docs3,
                            d: docs4,
                        },
                        correctAnswer: docs5,
                    }
                    myQuestions.push(questions);
                }
                myQuestions.forEach(
                    (currentQuestion, questionNumber) => {
                        const answers = [];
                        for (letter in currentQuestion.answers) {
                            answers.push(
                                `<label>
              <input type="radio" name="question${questionNumber}" value="${letter}">
              ${letter} :
              ${currentQuestion.answers[letter]}
            </label>`
                            );
                        }
                        output.push(
                            `<div class="question"> ${currentQuestion.question} </div>
          <div class="answers"> ${answers.join('')} </div>`
                        );
                    }
                );
                quizContainer.innerHTML = output.join('');
            }

            function showResults() {
                const answerContainers = quizContainer.querySelectorAll('.answers');
                let numCorrect = 0;
                myQuestions.forEach((currentQuestion, questionNumber) => {
                    const answerContainer = answerContainers[questionNumber];
                    const selector = `input[name=question${questionNumber}]:checked`;
                    const userAnswer = (answerContainer.querySelector(selector) || {}).value;
                    if (userAnswer === currentQuestion.correctAnswer) {
                        numCorrect++;
                        answerContainers[questionNumber].style.color = 'lightgreen';
                    }
                    else {
                        answerContainers[questionNumber].style.color = 'red';
                    }
                });
                resultsContainer.innerHTML = `${numCorrect} out of ${myQuestions.length}`;
            }

            const quizContainer = document.getElementById('quiz');
            const resultsContainer = document.getElementById('results');
            const submitButton = document.getElementById('submit');
            const myQuestions = [


            ];
            buildQuiz();
            submitButton.addEventListener('click', showResults);
        })();
    </script>

</body>

</html>